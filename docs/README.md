# OpenClaw é–‹ç™¼æ–‡æª”

## é …ç›®æ¦‚è¿°

OpenClaw æ˜¯ä¸€å€‹å€‹äººè‡ªå‹•åŒ–åŠ©ç†ç³»çµ±ï¼Œæ•´åˆäº†å¤šå€‹æ•¸æ“šæºå’Œæœå‹™ï¼ŒåŒ…æ‹¬ WhatsApp CRMã€MCP æœå‹™å™¨ã€DAV æœå‹™ã€éƒµä»¶ç®¡ç†å’ŒèªéŸ³è½‰éŒ„ç­‰åŠŸèƒ½ã€‚

## ä»Šæ—¥æ–°å¢åŠŸèƒ½ï¼ˆ2026-02-21ï¼‰

### 1. Whisper èªéŸ³è½‰éŒ„ç³»çµ±

#### 1.1 å®‰è£èˆ‡è¨­ç½®

å‰µå»ºäº†å®Œæ•´çš„ Whisper èªéŸ³è½‰éŒ„ç’°å¢ƒï¼š

```bash
# å‰µå»º Python è™›æ“¬ç’°å¢ƒ
python3 -m venv /root/.openclaw/tools/whisper-env

# å®‰è£ä¾è³´
pip install faster-whisper websockets requests
```

#### 1.2 æ ¸å¿ƒçµ„ä»¶

**whisper-transcribe.py** - æ‰¹æ¬¡è½‰éŒ„å·¥å…·
- æ”¯æ´å–®æ–‡ä»¶å’Œæ‰¹æ¬¡è™•ç†
- è‡ªå‹•èªè¨€æª¢æ¸¬ï¼ˆç²µèªã€æ™®é€šè©±ã€è‹±æ–‡ï¼‰
- è¼¸å‡º JSON å’Œ SRT æ ¼å¼

**whatsapp-voice-transcriber.py** - å¯¦æ™‚è½‰éŒ„æœå‹™
- WebSocket é€£æ¥ WhatsApp CRM
- è‡ªå‹•ä¸‹è¼‰èªéŸ³/è¦–é »æ–‡ä»¶
- å³æ™‚è½‰éŒ„ä¸¦ç”Ÿæˆçµ„åˆæ–‡ä»¶

**start-voice-transcriber.sh** - å•Ÿå‹•è…³æœ¬
- ä½¿ç”¨ tmux ä¿æŒæœå‹™é‹è¡Œ
- è‡ªå‹•é‡é€£æ©Ÿåˆ¶

#### 1.3 è¼¸å‡ºæ ¼å¼

çµ„åˆæ–‡ä»¶ (`{chat_id}_{message_id}_combined.txt`)ï¼š
```
============================================================
ğŸ™ï¸ èªéŸ³è¨Šæ¯è½‰éŒ„
============================================================

ğŸ“ éŸ³é »æ–‡ä»¶: xxx.ogg
ğŸ‘¤ ç™¼é€è€…: [ç™¼é€è€…åç¨±]
ğŸ’¬ èŠå¤©: [èŠå¤©ID]
ğŸ• æ™‚é–“: 2026-02-21 02:53:00
ğŸŒ èªè¨€: yue (ä¿¡å¿ƒåº¦: 95%)
â±ï¸ æ™‚é•·: 15.3 ç§’
ğŸ“ æ–‡ä»¶ä½ç½®: /root/.openclaw/whatsapp-media/voice/xxx.ogg

============================================================
ğŸ“ è½‰éŒ„å…§å®¹:
============================================================

[è½‰éŒ„çš„æ–‡å­—å…§å®¹...]
```

#### 1.4 ä½¿ç”¨æ–¹æ³•

```bash
# å•Ÿå‹•å¯¦æ™‚è½‰éŒ„æœå‹™
/root/.openclaw/tools/start-voice-transcriber.sh

# ç›£æ§æœå‹™
tmux -S /tmp/openclaw-tmux-sockets/openclaw.sock attach -t whatsapp-voice

# æ‰¹æ¬¡è½‰éŒ„ç¾æœ‰æ–‡ä»¶
whisper-transcribe /path/to/audio -b
```

---

### 2. æ—¥æ›†äº‹ä»¶æå–èˆ‡ç®¡ç†

#### 2.1 å¾ WhatsApp æå–æœƒè­°

æƒæäº† 15 å€‹ WhatsApp ç¾¤çµ„ï¼ˆ8119 å€‹å°è©±ï¼‰ï¼Œæå–äº†ä»¥ä¸‹æœƒè­°ï¼š

| æ´»å‹• | æ—¥æœŸ | æ™‚é–“ | åœ°é» | ä¾†æº |
|------|------|------|------|------|
| Ocean 10é€±å¹´æ™šå®´ | 2æœˆ25æ—¥ | 18:00-23:00 | å¿«æ´»è°· | Ocean Family |
| HKITSEA OC Zoom æœƒè­° | 2æœˆ27æ—¥ | 10:00-11:00 | Zoom | HKITSEA Partners |
| BNIT 6é€±å¹´æ™šå®´ | 2æœˆ27æ—¥ | 17:00-22:00 | å½©ç¦çš‡å®´ | BNIT Group |
| Slashie å‰µæ¥­åœ–å¡å·¥ä½œåŠ | 2æœˆ28æ—¥ | 15:00-17:00 | ç£ä»” | Jenni Chui |
| Ocean BNI èšæœƒ | æ¯é€±å›› | 06:30-08:30 | å¾…å®š | Ocean Family |

#### 2.2 iCalendar æ–‡ä»¶

æ‰€æœ‰äº‹ä»¶å·²æ·»åŠ åˆ° `/root/.openclaw/dav-data/files/hkitsea-calendar.ics`

---

### 3. DAV æœå‹™å™¨æ•´åˆ

#### 3.1 æœå‹™ç«¯é»

| æœå‹™ | URL | èªè­‰ |
|------|-----|------|
| HTTP | `http://openclaw.techforliving.app:3080` | admin/openclaw123 |
| HTTPS | `https://openclaw.techforliving.app` | admin/openclaw123 |
| CalDAV | `/calendars/` | Basic Auth |
| CardDAV | `/contacts/` | Basic Auth |
| WebDAV | `/files/` | Basic Auth |

#### 3.2 Let's Encrypt SSL

- åŸŸåï¼š`openclaw.techforliving.app`
- è­‰æ›¸è·¯å¾‘ï¼š`/root/.acme.sh/openclaw.techforliving.app_ecc/`
- æœ‰æ•ˆæœŸï¼š90 å¤©ï¼ˆè‡³ 2026-05-21ï¼‰

---

## ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        OpenClaw                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   WhatsApp  â”‚  â”‚    MCP      â”‚  â”‚       DAV           â”‚  â”‚
â”‚  â”‚    CRM      â”‚  â”‚  Servers    â”‚  â”‚    Server           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                â”‚                     â”‚             â”‚
â”‚         â–¼                â–¼                     â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Voice Transcriber                      â”‚    â”‚
â”‚  â”‚         (Whisper + WebSocket)                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                â”‚                     â”‚             â”‚
â”‚         â–¼                â–¼                     â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   voice/    â”‚  â”‚ transcripts/â”‚  â”‚    calendars/       â”‚  â”‚
â”‚  â”‚  (media)    â”‚  â”‚  (text)     â”‚  â”‚    (ics files)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ–‡ä»¶æ¸…å–®

### ä»Šæ—¥æ–°å¢/ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | æè¿° |
|------|------|
| `/root/.openclaw/tools/whisper-transcribe.py` | Whisper æ‰¹æ¬¡è½‰éŒ„å·¥å…· |
| `/root/.openclaw/tools/whatsapp-voice-transcriber.py` | WhatsApp å¯¦æ™‚èªéŸ³è½‰éŒ„ |
| `/root/.openclaw/tools/start-voice-transcriber.sh` | è½‰éŒ„æœå‹™å•Ÿå‹•è…³æœ¬ |
| `/root/.openclaw/tools/whisper-setup.sh` | Whisper è¨­ç½®è…³æœ¬ |
| `/root/.openclaw/workspace/docs/VOICE_TRANSCRIBER.md` | èªéŸ³è½‰éŒ„æ–‡æª” |
| `/root/.openclaw/workspace/docs/TOOLS.md` | å·¥å…·ç¸½è¦½æ–‡æª” |
| `/root/.openclaw/workspace/docs/README.md` | æœ¬æ–‡æª” |
| `/root/.openclaw/dav-data/files/hkitsea-calendar.ics` | æ—¥æ›†æ–‡ä»¶ï¼ˆå·²æ›´æ–°ï¼‰ |

---

## ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿé–‹å§‹

```bash
# 1. å•Ÿå‹• DAV æœå‹™å™¨
openclaw-dav

# 2. å•Ÿå‹•èªéŸ³è½‰éŒ„æœå‹™
/root/.openclaw/tools/start-voice-transcriber.sh

# 3. æŸ¥çœ‹æ—¥æ›†
cat /root/.openclaw/dav-data/files/hkitsea-calendar.ics
```

### ç›£æ§å‘½ä»¤

```bash
# æŸ¥çœ‹èªéŸ³è½‰éŒ„æ—¥èªŒ
tmux -S /tmp/openclaw-tmux-sockets/openclaw.sock capture-pane -p -t whatsapp-voice:0.0 -S -50

# æŸ¥çœ‹ DAV æœå‹™å™¨æ—¥èªŒ
tail -f /root/.openclaw/dav-data/server.log
```

---

## API åƒè€ƒ

### WhatsApp CRM API

```
Base URL: https://whatsapp-crm.techforliving.app

GET  /api/sessions                    # åˆ—å‡ºæ‰€æœ‰ sessions
GET  /api/session/{id}/status         # ç²å– session ç‹€æ…‹
GET  /api/session/{id}/contacts       # ç²å–è¯ç¹«äººåˆ—è¡¨
GET  /api/session/{id}/messages/{jid} # ç²å–è¨Šæ¯
POST /api/crm/messages/send           # ç™¼é€è¨Šæ¯
WS   /ws                              # WebSocket å¯¦æ™‚è¨Šæ¯
```

### DAV Server API

```
Base URL: https://openclaw.techforliving.app

GET  /api/calendars     # åˆ—å‡ºæ—¥æ›†
GET  /api/contacts      # åˆ—å‡ºè¯ç¹«äºº
GET  /api/files         # åˆ—å‡ºæ–‡ä»¶
```

---

## æˆæ¬Š

MIT License

## ä½œè€…

OpenClaw Project
